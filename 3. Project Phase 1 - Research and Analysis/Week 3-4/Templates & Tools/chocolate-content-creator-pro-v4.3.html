<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chocolate on James - Complete Content Creator PRO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a0f0a 0%, #2d1810 50%, #1a0f0a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 20px;
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #D4AF37, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #d4a574;
            font-size: 1.2em;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .version-badge {
            display: inline-block;
            margin-top: 10px;
            padding: 6px 16px;
            background: linear-gradient(135deg, #D4AF37, #8B4513);
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            color: #fff;
        }

        .quick-presets {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .preset-btn {
            padding: 8px 16px;
            background: rgba(139, 69, 19, 0.4);
            border: 1px solid rgba(212, 175, 55, 0.4);
            border-radius: 20px;
            color: #D4AF37;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85em;
        }

        .preset-btn:hover {
            background: rgba(212, 175, 55, 0.3);
            transform: translateY(-2px);
        }

        .main-layout {
            display: grid;
            grid-template-columns: 420px 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .controls {
            background: rgba(30, 20, 15, 0.95);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            height: fit-content;
            position: sticky;
            top: 20px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .output-area {
            background: rgba(30, 20, 15, 0.95);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            min-height: 600px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            color: #D4AF37;
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: #D4AF37;
            font-size: 0.9em;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: #FFD700;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            white-space: nowrap;
            z-index: 1000;
            border: 1px solid #D4AF37;
        }

        select, input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 0.95em;
            transition: all 0.3s;
        }

        select:focus, input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #D4AF37;
            background: rgba(0, 0, 0, 0.5);
        }

        select option {
            background: #1a0f0a;
            color: #e0e0e0;
        }

        .option-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 8px;
        }

        .option-btn {
            padding: 10px;
            background: rgba(139, 69, 19, 0.3);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85em;
            text-align: center;
        }

        .option-btn:hover {
            background: rgba(139, 69, 19, 0.5);
            border-color: #D4AF37;
            transform: translateY(-2px);
        }

        .option-btn.active {
            background: linear-gradient(135deg, #D4AF37, #8B4513);
            border-color: #FFD700;
            color: #fff;
        }

        button {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .btn-generate {
            width: 100%;
            background: linear-gradient(135deg, #D4AF37, #FFD700);
            color: #1a0f0a;
            font-size: 1.1em;
            margin-top: 20px;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
        }

        .btn-regenerate {
            width: 100%;
            background: rgba(139, 69, 19, 0.5);
            color: #FFD700;
            border: 1px solid #D4AF37;
            font-size: 1em;
            margin-top: 10px;
        }

        .btn-regenerate:hover {
            background: rgba(139, 69, 19, 0.8);
            transform: translateY(-2px);
        }

        .btn-clear {
            width: 100%;
            background: rgba(100, 100, 100, 0.3);
            color: #aaa;
            border: 1px solid rgba(150, 150, 150, 0.3);
            font-size: 0.9em;
            margin-top: 10px;
        }

        .btn-clear:hover {
            background: rgba(150, 150, 150, 0.4);
            color: #fff;
            border-color: rgba(200, 200, 200, 0.5);
            transform: translateY(-2px);
        }

        .workflow-guide {
            background: rgba(30, 120, 180, 0.15);
            border: 1px solid rgba(100, 180, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.85em;
            line-height: 1.6;
        }

        .workflow-guide strong {
            color: #5dade2;
            display: block;
            margin-bottom: 8px;
        }

        .workflow-guide ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .workflow-guide li {
            padding: 4px 0;
            color: #d4a574;
        }

        .workflow-guide li::before {
            content: "‚Üí ";
            color: #5dade2;
            font-weight: bold;
        }

        .btn-copy {
            background: rgba(139, 69, 19, 0.5);
            color: #D4AF37;
            border: 1px solid #D4AF37;
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .btn-copy:hover {
            background: rgba(139, 69, 19, 0.8);
            color: #FFD700;
        }

        .btn-export {
            background: rgba(75, 0, 130, 0.5);
            color: #D4AF37;
            border: 1px solid #D4AF37;
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .btn-export:hover {
            background: rgba(75, 0, 130, 0.8);
            color: #FFD700;
        }

        .content-section {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .content-title {
            color: #D4AF37;
            font-size: 1.5em;
            font-weight: 600;
        }

        .content-icon {
            font-size: 1.5em;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .prompt-text {
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.8;
            color: #f5f5dc;
            white-space: pre-wrap;
            word-wrap: break-word;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .logo-instructions {
            margin-top: 15px;
            padding: 15px;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #d4a574;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .logo-instructions strong {
            color: #FFD700;
        }

        .social-posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .social-post-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
            position: relative;
        }

        .social-post-card:hover {
            border-color: #D4AF37;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .post-number {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(212, 175, 55, 0.3);
            color: #FFD700;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .post-copy {
            color: #f5f5dc;
            line-height: 1.6;
            margin-bottom: 12px;
            font-size: 0.95em;
        }

        .post-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(212, 175, 55, 0.1);
            font-size: 0.8em;
            color: #d4a574;
        }

        .char-count {
            font-size: 0.75em;
            color: #d4a574;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #8B7355;
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-option:hover {
            background: rgba(139, 69, 19, 0.3);
        }

        .checkbox-option input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }

        .checkbox-option label {
            cursor: pointer;
            flex: 1;
            font-size: 0.9em;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            display: block;
            color: #d4a574;
            font-size: 0.85em;
            margin-bottom: 6px;
        }

        .input-help {
            font-size: 0.75em;
            color: #8B7355;
            margin-top: 4px;
            font-style: italic;
        }

        .tips {
            background: rgba(139, 69, 19, 0.2);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.85em;
            color: #d4a574;
        }

        .tips-title {
            font-weight: 600;
            color: #D4AF37;
            margin-bottom: 8px;
        }

        .tips ul {
            margin-left: 20px;
            margin-top: 8px;
        }

        .tips li {
            margin-bottom: 5px;
        }

        .platform-badge {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(212, 175, 55, 0.2);
            border: 1px solid rgba(212, 175, 55, 0.4);
            border-radius: 15px;
            font-size: 0.75em;
            color: #FFD700;
            margin-left: 10px;
        }

        .success-message {
            background: rgba(34, 139, 34, 0.2);
            border: 1px solid rgba(34, 139, 34, 0.5);
            color: #90EE90;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
        }

        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .controls {
                position: relative;
                top: 0;
                max-height: none;
            }

            .social-posts-grid {
                grid-template-columns: 1fr;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(212, 175, 55, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(212, 175, 55, 0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üç´‚ú® Complete Content Creator PRO</h1>
            <p class="subtitle">AI Image Prompts + 10 Social Media Captions + Export Tools</p>
            <span class="version-badge">v4.3 ENHANCED - November 7, 2025</span>
            <p style="margin-top: 10px; color: #d4a574; font-size: 0.85em;">Designed by Greg Kowalczyk</p>

            <div class="quick-presets">
                <div class="preset-btn" onclick="loadPreset('valentines')">üíù Valentine's Promo</div>
                <div class="preset-btn" onclick="loadPreset('weekend')">üì∏ Weekend Showcase</div>
                <div class="preset-btn" onclick="loadPreset('behind')">üëê Behind-the-Scenes</div>
                <div class="preset-btn" onclick="loadPreset('local')">üèôÔ∏è Hamilton Pride</div>
            </div>
        </header>

        <div class="main-layout">
            <!-- Controls Panel -->
            <div class="controls">
                <div class="section">
                    <div class="section-title">
                        ü§ñ AI Platform
                        <span class="tooltip" data-tooltip="Choose based on your needs: Gemini is FREE!">‚ÑπÔ∏è</span>
                    </div>
                    <select id="ai-platform">
                        <option value="gemini">Google Gemini (FREE - Best to start)</option>
                        <option value="chatgpt">ChatGPT / DALL-E 3 (Easiest)</option>
                        <option value="midjourney">Midjourney (Best artistic)</option>
                        <option value="leonardo">Leonardo AI (Best consistency)</option>
                        <option value="ideogram">Ideogram (Best for text)</option>
                        <option value="firefly">Adobe Firefly (Commercial safe)</option>
                        <option value="stable-diffusion">Stable Diffusion (Advanced)</option>
                        <option value="universal">Universal (All platforms)</option>
                    </select>
                </div>

                <div class="section">
                    <div class="section-title">üì± Content Category</div>
                    <select id="category">
                        <option value="">Select Category...</option>
                        <option value="product-showcase">Product Showcase</option>
                        <option value="promotional">Promotional & Sales</option>
                        <option value="seasonal">Seasonal & Holiday</option>
                        <option value="educational">Educational & Tips</option>
                        <option value="behind-scenes">Behind-the-Scenes</option>
                        <option value="lifestyle">Lifestyle & Inspiration</option>
                        <option value="local-hamilton">Hamilton Local Pride</option>
                        <option value="customer-engagement">Customer Engagement</option>
                        <option value="custom">‚Üí Custom Category Below ‚Üì</option>
                    </select>
                    <div class="input-group" style="margin-top: 10px;">
                        <input type="text" id="custom-category" placeholder="e.g., Customer Thank You, Charity Partnership, Recipe Feature, Team Spotlight">
                        <div class="input-help">Create any content type: customer features, collaborations, testimonials, contests, etc.</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üìê Platform / Format</div>
                    <div class="option-group">
                        <div class="option-btn active" data-platform="instagram-square">Instagram Post</div>
                        <div class="option-btn" data-platform="instagram-story">IG Story</div>
                        <div class="option-btn" data-platform="facebook-ad">Facebook Ad</div>
                        <div class="option-btn" data-platform="pinterest">Pinterest</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üìÖ Month / Season</div>
                    <select id="season">
                        <option value="any">Any Time</option>
                        <option value="january">January</option>
                        <option value="february">February (Valentine's)</option>
                        <option value="march">March (Easter prep)</option>
                        <option value="april">April (Easter/Mother's Day)</option>
                        <option value="may">May (Mother's Day)</option>
                        <option value="june">June (Father's Day/Summer)</option>
                        <option value="july">July (Summer)</option>
                        <option value="august">August (Back to School)</option>
                        <option value="september">September (Fall)</option>
                        <option value="october">October (Halloween)</option>
                        <option value="november">November (Thanksgiving/Holidays)</option>
                        <option value="december">December (Christmas)</option>
                        <option value="custom">‚Üí Custom Occasion Below ‚Üì</option>
                    </select>
                    <div class="input-group" style="margin-top: 10px;">
                        <input type="text" id="custom-occasion" placeholder="e.g., Art Crawl Weekend, Anniversary Sale, Grand Opening">
                        <div class="input-help">Use this for special events not in the dropdown</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üë• Target Audience</div>
                    <select id="audience">
                        <option value="general">General Audience</option>
                        <option value="hamilton-locals">Hamilton Locals</option>
                        <option value="gift-buyers">Gift Buyers</option>
                        <option value="corporate">Corporate Clients</option>
                        <option value="foodies">Chocolate Enthusiasts</option>
                        <option value="luxury">Luxury Seekers</option>
                        <option value="millennials">Millennials & Gen Z</option>
                        <option value="custom">‚Üí Custom Audience Below ‚Üì</option>
                    </select>
                    <div class="input-group" style="margin-top: 10px;">
                        <input type="text" id="custom-audience" placeholder="e.g., Real estate agents, McMaster students, Dentist offices">
                        <div class="input-help">Target a specific group or business type</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üé® Image Style</div>
                    <div class="option-group">
                        <div class="option-btn active" data-style="photography">Photography</div>
                        <div class="option-btn" data-style="lifestyle">Lifestyle</div>
                        <div class="option-btn" data-style="minimalist">Minimalist</div>
                        <div class="option-btn" data-style="artistic">Artistic</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">‚ú® Image Elements</div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="include-text" checked>
                        <label for="include-text">Space for text overlay</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="include-logo" checked>
                        <label for="include-logo">Show logo/branding area</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="include-location" checked>
                        <label for="include-location">Hamilton location emphasis</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="include-people">
                        <label for="include-people">Include people/hands</label>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üí¨ Caption Options</div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="include-emojis" checked>
                        <label for="include-emojis">Include emojis in captions</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="include-questions" checked>
                        <label for="include-questions">Add engaging questions</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="strong-cta" checked>
                        <label for="strong-cta">Strong call-to-action</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="suggest-gifs">
                        <label for="suggest-gifs">Suggest GIFs/animations</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="formal-tone">
                        <label for="formal-tone">Professional/formal tone</label>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üîß Custom Details</div>
                    <div class="input-group">
                        <label class="input-label">Specific Product</label>
                        <input type="text" id="product-name" placeholder="e.g., Dark Chocolate Truffles, Sea Salt Caramels">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Special Notes/Requirements</label>
                        <textarea id="special-notes" rows="2" placeholder="Any specific details, offers, or requirements..."></textarea>
                    </div>
                </div>

                <button class="btn-generate" onclick="generateContent()">‚ú® Generate Complete Content</button>
                <button class="btn-regenerate" onclick="regenerateContent()" style="display: none;" id="btn-regenerate">üîÑ Regenerate With Current Settings</button>
                <button class="btn-clear" onclick="clearForm()">üóëÔ∏è Clear All Fields & Start Fresh</button>

                <div class="workflow-guide">
                    <strong>üéØ How To Use:</strong>
                    <ul>
                        <li><strong>Generate</strong> - Creates new content with your current settings</li>
                        <li><strong>Regenerate</strong> - Keep settings, shuffle caption order, update any changes</li>
                        <li><strong>Clear</strong> - Reset everything to start a brand new project</li>
                    </ul>
                </div>

                <div class="tips">
                    <div class="tips-title">üí° What You Get:</div>
                    <ul>
                        <li>‚úÖ AI image prompt (platform-optimized)</li>
                        <li>‚úÖ 10 unique social media captions</li>
                        <li>‚úÖ Logo placement instructions</li>
                        <li>‚úÖ Hashtags & CTAs included</li>
                        <li>‚úÖ Export & copy options</li>
                        <li>‚úÖ GIF suggestions (if selected)</li>
                    </ul>
                </div>
            </div>

            <!-- Output Area -->
            <div class="output-area">
                <div id="output">
                    <div class="empty-state">
                        <div class="empty-state-icon">üé®‚úçÔ∏è</div>
                        <div class="empty-state-text">
                            <strong>Complete Content in 3 Steps:</strong><br><br>
                            1Ô∏è‚É£ Select your options (or use Quick Presets above)<br>
                            2Ô∏è‚É£ Click "Generate Complete Content"<br>
                            3Ô∏è‚É£ Copy your AI prompt + choose from 10 captions!<br><br>
                            <em>Perfect for Instagram, Facebook, Pinterest posts</em>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPlatform = 'instagram-square';
        let currentStyle = 'photography';
        let lastGeneratedOptions = null;

        // Platform selection
        document.querySelectorAll('[data-platform]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-platform]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentPlatform = this.dataset.platform;
            });
        });

        // Style selection
        document.querySelectorAll('[data-style]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-style]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentStyle = this.dataset.style;
            });
        });

        // Quick Presets
        function loadPreset(type) {
            switch(type) {
                case 'valentines':
                    document.getElementById('category').value = 'seasonal';
                    document.getElementById('season').value = 'february';
                    document.getElementById('audience').value = 'gift-buyers';
                    document.getElementById('product-name').value = 'Valentine\'s Day Chocolate Collection';
                    break;
                case 'weekend':
                    document.getElementById('category').value = 'product-showcase';
                    document.getElementById('season').value = 'any';
                    document.getElementById('audience').value = 'general';
                    break;
                case 'behind':
                    document.getElementById('category').value = 'behind-scenes';
                    document.getElementById('season').value = 'any';
                    document.getElementById('audience').value = 'hamilton-locals';
                    break;
                case 'local':
                    document.getElementById('category').value = 'local-hamilton';
                    document.getElementById('season').value = 'any';
                    document.getElementById('audience').value = 'hamilton-locals';
                    break;
            }
        }

        function getOptions() {
            const categorySelect = document.getElementById('category').value;
            const customCategory = document.getElementById('custom-category').value;
            const actualCategory = categorySelect === 'custom' ? 'custom' : categorySelect;

            const seasonSelect = document.getElementById('season').value;
            const customOccasion = document.getElementById('custom-occasion').value;
            const actualSeason = seasonSelect === 'custom' ? customOccasion : seasonSelect;

            const audienceSelect = document.getElementById('audience').value;
            const customAudience = document.getElementById('custom-audience').value;
            const actualAudience = audienceSelect === 'custom' ? customAudience : audienceSelect;

            return {
                aiPlatform: document.getElementById('ai-platform').value,
                category: actualCategory,
                customCategory: customCategory,
                platform: currentPlatform,
                season: actualSeason,
                customOccasion: customOccasion,
                audience: actualAudience,
                customAudience: customAudience,
                style: currentStyle,
                includeText: document.getElementById('include-text').checked,
                includeLogo: document.getElementById('include-logo').checked,
                includeLocation: document.getElementById('include-location').checked,
                includePeople: document.getElementById('include-people').checked,
                includeEmojis: document.getElementById('include-emojis').checked,
                includeQuestions: document.getElementById('include-questions').checked,
                strongCta: document.getElementById('strong-cta').checked,
                suggestGifs: document.getElementById('suggest-gifs').checked,
                formalTone: document.getElementById('formal-tone').checked,
                productName: document.getElementById('product-name').value,
                specialNotes: document.getElementById('special-notes').value
            };
        }

        function generateContent() {
            const options = getOptions();

            if (!options.category) {
                alert('Please select a content category');
                return;
            }

            // If custom category selected, make sure they filled in the custom field
            if (options.category === 'custom' && !options.customCategory) {
                alert('Please enter a custom category description in the text field below the dropdown');
                return;
            }

            // Save options for regenerate button
            lastGeneratedOptions = JSON.parse(JSON.stringify(options)); // Deep copy
            document.getElementById('btn-regenerate').style.display = 'block';

            const imagePrompt = buildImagePrompt(options);
            const socialPosts = buildSocialMediaCopy(options, false); // false = not regenerating

            displayContent(imagePrompt, socialPosts, options);
        }

        function regenerateContent() {
            // Get fresh current options from the form
            const currentOptions = getOptions();

            if (!currentOptions.category) {
                alert('Please select a content category');
                return;
            }

            // If custom category selected, make sure they filled in the custom field
            if (currentOptions.category === 'custom' && !currentOptions.customCategory) {
                alert('Please enter a custom category description in the text field below the dropdown');
                return;
            }

            // Use the current form values for regeneration with shuffle
            const imagePrompt = buildImagePrompt(currentOptions);
            const socialPosts = buildSocialMediaCopy(currentOptions, true); // true = regenerating, will shuffle

            displayContent(imagePrompt, socialPosts, currentOptions);

            // Update last generated options
            lastGeneratedOptions = JSON.parse(JSON.stringify(currentOptions));
        }

        function clearForm() {
            if (confirm('Clear all fields and start fresh? This will reset everything.')) {
                // Reset all dropdowns to defaults
                document.getElementById('ai-platform').value = 'gemini';
                document.getElementById('category').value = 'product-showcase';
                document.getElementById('season').value = 'any';
                document.getElementById('audience').value = 'general';

                // Clear custom text inputs
                document.getElementById('custom-category').value = '';
                document.getElementById('custom-occasion').value = '';
                document.getElementById('custom-audience').value = '';
                document.getElementById('product-name').value = '';
                document.getElementById('special-notes').value = '';

                // Reset checkboxes to defaults
                document.getElementById('include-text').checked = true;
                document.getElementById('include-logo').checked = true;
                document.getElementById('include-location').checked = true;
                document.getElementById('include-people').checked = false;
                document.getElementById('include-emojis').checked = true;
                document.getElementById('include-questions').checked = true;
                document.getElementById('strong-cta').checked = true;
                document.getElementById('suggest-gifs').checked = false;
                document.getElementById('formal-tone').checked = false;

                // Reset platform and style to defaults by clicking the first option
                const firstPlatformBtn = document.querySelector('[data-platform="instagram-square"]');
                if (firstPlatformBtn && !firstPlatformBtn.classList.contains('active')) {
                    firstPlatformBtn.click();
                }

                const firstStyleBtn = document.querySelector('[data-style="photography"]');
                if (firstStyleBtn && !firstStyleBtn.classList.contains('active')) {
                    firstStyleBtn.click();
                }

                // Clear output area
                document.getElementById('output').innerHTML = '<div class="placeholder">Generated content will appear here...</div>';

                // Hide regenerate button
                document.getElementById('btn-regenerate').style.display = 'none';

                // Clear stored options
                lastGeneratedOptions = null;

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function buildImagePrompt(options) {
            const productName = options.productName || 'artisan handmade chocolates';

            // Get category-specific subject and mood
            const categorySubjects = {
                'product-showcase': 'professional commercial product photography showcasing premium handcrafted chocolate quality, artisan craftsmanship, and luxurious presentation',
                'promotional': 'compelling promotional commercial photography emphasizing irresistible appeal, special value, and strong visual impact that drives customer action',
                'seasonal': 'festive seasonal celebration photography highlighting elegant gift-worthy presentation, holiday magic, and special occasion atmosphere',
                'educational': 'clear informative editorial photography about chocolate making process, proper storage techniques, or fascinating chocolate facts and knowledge',
                'behind-scenes': 'authentic documentary-style photography capturing artisan chocolate creation moments, skilled hands at work, and dedication to craft',
                'lifestyle': 'aspirational editorial lifestyle photography featuring chocolate as part of life\'s indulgent pleasures, self-care moments, and joyful experiences',
                'local-hamilton': 'vibrant community-focused photography celebrating Hamilton local pride, James Street North cultural character, and authentic neighborhood spirit',
                'customer-engagement': 'dynamic interactive photography designed for maximum social media shareability, engagement, and audience connection',
                'custom': options.customCategory || 'premium professional branded content photography'
            };

            const categoryMoods = {
                'product-showcase': 'sophisticated, elegant, luxurious, premium, highly appetizing, desire-inducing, museum-quality presentation',
                'promotional': 'exciting, energetic, bold, attention-commanding, value-focused, urgency-creating, irresistibly compelling',
                'seasonal': 'festive, joyful, celebratory, warm, magical, gift-worthy, emotionally resonant, memory-creating',
                'educational': 'informative, professional, trustworthy, authoritative, expert, clear, accessible, confidence-building',
                'behind-scenes': 'authentic, genuine, artisan, dedicated, skillful, passionate, craft-focused, human-centered',
                'lifestyle': 'aspirational, indulgent, cozy, warm, inviting, relatable, dreamy, self-care focused',
                'local-hamilton': 'community-proud, locally-rooted, authentic, neighborhood-spirited, welcoming, grassroots',
                'customer-engagement': 'fun, playful, interactive, shareable, conversational, engaging, social-friendly',
                'custom': 'professional, polished, trustworthy, brand-aligned, strategically consistent'
            };

            // Platform specifications
            const platformSpecs = {
                'instagram-square': '1:1 aspect ratio (square)',
                'instagram-story': '9:16 vertical aspect ratio (portrait orientation)',
                'facebook-ad': '1.91:1 landscape aspect ratio (horizontal composition)',
                'pinterest': '2:3 vertical aspect ratio (tall pin format)'
            };

            // Build seasonal elements if applicable
            let seasonalElements = '';
            if (options.customOccasion) {
                seasonalElements = `Incorporate ${options.customOccasion} theme with appropriate seasonal styling, colors, and festive atmosphere.`;
            } else if (options.season && options.season !== 'any') {
                const seasonalThemes = {
                    'february': 'Valentine\'s Day magic with romantic red and pink accents, hearts, intimate love atmosphere, festive sparkle',
                    'march': 'Spring awakening with Easter preparation hints, pastel touches, renewal feeling, fresh energy',
                    'april': 'Easter celebration with spring colors, Mother\'s Day elegance, bright spring light, renewal',
                    'may': 'Mother\'s Day focus with elegant feminine touches, appreciation and grace, warm spring atmosphere',
                    'june': 'Father\'s Day masculine sophistication with summer warmth, strength and appreciation',
                    'july': 'Summer vibes with bright fresh energy, warm season atmosphere, vacation mood',
                    'august': 'Back to school energy with teacher appreciation theme, late summer warmth, preparation mood',
                    'september': 'Fall arrival with autumn colors beginning, cozy transition mood, harvest feeling',
                    'october': 'Halloween fun with autumn richness, festive orange and brown tones, playful spooky touches',
                    'november': 'Thanksgiving gratitude with pre-holiday excitement, warm rich autumn tones, family gathering',
                    'december': 'Christmas magic with holiday celebration, festive red green and gold, winter wonder, joyful atmosphere'
                };
                if (seasonalThemes[options.season]) {
                    seasonalElements = seasonalThemes[options.season];
                }
            }

            // Photography style specifications
            const styleSpecs = {
                'photography': 'professional commercial product photography with clean studio setup, controlled lighting, sharp focus, and precise composition',
                'lifestyle': 'editorial lifestyle photography with natural warm lighting, authentic moments, soft focus backgrounds, and aspirational atmosphere',
                'minimalist': 'minimalist zen photography with abundant negative space, clean lines, simple elegant composition, and understated sophistication',
                'artistic': 'creative artistic photography with dramatic lighting, unique angles, bold composition, and gallery-worthy aesthetic appeal'
            };

            // Lighting descriptions for premium results
            const lightingSetups = {
                'photography': '3-point studio lighting setup with soft key light at 45 degrees, gentle fill light to reduce shadows, subtle rim light for definition, professional light modifiers, no harsh shadows, even illumination, controlled highlights',
                'lifestyle': 'soft natural window light or diffused artificial lighting creating warm inviting glow, gentle shadows for depth, golden hour warmth, cozy atmospheric lighting',
                'minimalist': 'soft diffused overhead lighting with minimal shadows, clean bright illumination, ethereal quality, airy luminous atmosphere',
                'artistic': 'dramatic directional lighting with bold shadows and highlights, creative light painting effects, moody atmospheric lighting, striking contrast'
            };

            // Build structured prompt
            let prompt = `Create a stunning high-end commercial photograph for premium artisan chocolate brand with the following detailed specifications:

SUBJECT: ${categorySubjects[options.category]}

COMPOSITION & STYLE:
- Image format: ${platformSpecs[options.platform]}
- Photography style: ${styleSpecs[currentStyle]}
- Camera settings: shallow depth of field (f/2.8-f/4) for beautiful bokeh, macro lens perspective for exquisite detail, tack-sharp focus on main subject
- Composition technique: rule of thirds placement, leading lines guiding eye to product, balanced visual weight, professional framing
- Mood and atmosphere: ${categoryMoods[options.category]}`;

            if (options.includeText) {
                prompt += `\n- Strategic negative space: generous clean area in top third or left side specifically reserved for text overlay, maintaining visual balance`;
            }
            if (options.includeLogo) {
                prompt += `\n- Logo placement area: clean unobstructed space in bottom right corner (15% of image) for brand logo overlay`;
            }

            prompt += `\n\nFEATURED PRODUCT: ${productName}
- Product presentation: hero positioning, premium showcase, irresistibly appetizing, craft quality visible
- Texture emphasis: glossy chocolate surfaces, smooth finishes, rich depths, luxurious details
- Detail capture: hand-crafted characteristics, artisan touches, quality indicators, premium materials`;

            prompt += `\n\nLIGHTING SETUP:
${lightingSetups[currentStyle]}
- Lighting effects: soft catchlights on chocolate surfaces, appetizing sheen, no overexposure, rich shadow detail
- Color temperature: warm inviting tones (3200-4000K) creating cozy premium atmosphere`;

            prompt += `\n\nCOLOR PALETTE & VISUAL IDENTITY:
- Primary brand colors: deep rich chocolate brown (#3E2723 - dominant), luxurious warm cream (#F5F5DC - accent), elegant antique gold (#D4AF37 - highlight touches)
- Color grading: rich saturated chocolate tones, warm inviting palette, premium color depth, professional color accuracy
- Texture materials: smooth polished surfaces, natural wood elements, elegant fabric textures, refined materials`;

            if (options.category === 'educational') {
                prompt += `\n- Educational visual keywords: informative diagrams, step-by-step clarity, expert demonstration, chocolate science, artisan techniques, knowledge sharing, tutorial quality`;
            } else if (options.category === 'behind-scenes') {
                prompt += `\n- Behind-scenes visual keywords: authentic work environment, artisan hands in action, chocolate-making process, skilled craftsperson, dedication visible, workshop atmosphere, human touch`;
            } else if (options.category === 'lifestyle') {
                prompt += `\n- Lifestyle visual keywords: cozy moments, self-indulgence, treating yourself, life's pleasures, relaxation mood, comfort setting, personal enjoyment`;
            }

            prompt += `\n- Brand personality: Hamilton's premium artisan chocolate, small-batch craftsmanship, locally-made excellence, James Street North sophistication, boutique quality, personal care in every piece`;

            if (options.includePeople) {
                prompt += `\n- Human element: elegant manicured hands delicately holding chocolate, refined gesture, sophisticated interaction, appreciative enjoyment, graceful positioning, natural authentic moment`;
            }

            // Background and setting
            prompt += `\n\nBACKGROUND & SETTING:
- Surface materials: natural hardwood table, marble countertop, elegant linen fabric, or refined textured surface
- Background treatment: `;
            if (currentStyle === 'minimalist') {
                prompt += `pure clean background with soft gradient, minimal distractions, zen simplicity`;
            } else if (currentStyle === 'lifestyle') {
                prompt += `cozy home environment with soft blur, warm inviting space, authentic lived-in feel`;
            } else if (currentStyle === 'artistic') {
                prompt += `creative artistic backdrop with interesting textures, bold colors, unique elements`;
            } else {
                prompt += `professional neutral backdrop with subtle texture, elegant simplicity, non-distracting`;
            }

            prompt += `\n- Props and styling: `;
            if (options.category === 'seasonal') {
                prompt += `appropriate seasonal decorative elements, festive accents, holiday touches`;
            } else if (options.category === 'lifestyle') {
                prompt += `coffee cup, favorite book, cozy blanket, lifestyle context items`;
            } else if (options.category === 'behind-scenes') {
                prompt += `chocolate-making tools, artisan equipment, workshop elements`;
            } else {
                prompt += `minimal elegant props enhancing without overwhelming, premium accent pieces`;
            }

            if (options.includeLocation) {
                prompt += `\n- Hamilton local character: subtle incorporation of James Street North artistic vibe, local Hamilton landmarks softly visible, neighborhood character, community atmosphere, authentic local business feeling`;
            }

            if (seasonalElements) {
                prompt += `\n\nSEASONAL ATMOSPHERE:
${seasonalElements}
- Seasonal styling: appropriate decorative elements, holiday color scheme integration, festive props, occasion-specific mood enhancement`;
            }

            prompt += `\n\nTARGET AUDIENCE & MESSAGING:`;
            if (options.customAudience) {
                prompt += `\n- Primary audience: ${options.customAudience}
- Visual appeal: imagery specifically crafted to resonate with and attract this demographic, addressing their preferences and desires`;
            }
            if (options.includeLocation) {
                prompt += `\n- Local connection: Hamilton pride visible, James Street North culture evident, community roots, support local messaging, neighborhood authenticity`;
            } else {
                prompt += `\n- Universal appeal: premium quality emphasis, artisan craftsmanship showcase, expert presentation, sophisticated elegance`;
            }

            if (options.specialNotes) {
                prompt += `\n\nSPECIAL CREATIVE DIRECTION:
${options.specialNotes}`;
            }

            prompt += `\n\nTECHNICAL QUALITY STANDARDS:
- Resolution: ultra-high resolution 4K-8K quality, print-ready 300 DPI
- Sharpness: tack-sharp focus on main subject, beautiful bokeh on background elements, professional lens quality
- Lighting quality: studio-grade professional lighting, no harsh shadows, controlled highlights, perfect exposure
- Color accuracy: color-correct to exact brand palette specifications, professional color grading, magazine-quality color
- Texture detail: extreme close-up detail visible, luxurious material qualities apparent, premium finish evident
- Professional finish: commercial photography standard, advertising-quality polish, gallery-worthy presentation

STYLE REFERENCES: Kinfolk magazine aesthetic, Vogue food photography, Bon App√©tit editorial quality, high-end chocolate brand campaigns (Godiva, Lindt style), artisan food photography by professionals

FINAL RESULT: Museum-quality food photography suitable for premium brand marketing, social media hero images, print advertising, website hero sections, and luxury packaging design. Image must be so visually appealing it creates immediate desire and positions the brand as premium artisan quality.`;

            return {
                platform: options.aiPlatform.toUpperCase(),
                prompt: prompt,
                includeLogo: options.includeLogo
            };
        }

        function generateContextualHashtags(options, captionIndex, captionText) {
            // CORE BRAND HASHTAGS (always included)
            const coreBrand = ['#ChocolatOnJames', '#HamiltonsChocolate'];

            // LOCATION HASHTAGS
            const locationTags = ['#HamiltonOntario', '#JamesStreetNorth', '#HamOnt', '#ExploreHamilton', '#HamiltonLocalBusiness', '#ShopLocalHamilton'];

            // CATEGORY-SPECIFIC HASHTAGS
            const categoryTags = {
                'product-showcase': ['#ArtisanChocolate', '#HandmadeChocolate', '#ChocolateArt', '#ChocolateCraft', '#GourmetChocolate', '#LuxuryChocolate', '#PremiumChocolate', '#ChocolateLovers', '#ChocolateAddict'],
                'promotional': ['#ChocolateSale', '#ChocolateDeals', '#TreatYourself', '#ChocolateSpecial', '#LimitedOffer', '#ShopNow', '#DealOfTheDay', '#SaveOnChocolate'],
                'seasonal': ['#SeasonalChocolate', '#HolidayChocolate', '#FestiveChocolate', '#ChocolateGifts', '#GiftIdeas', '#CelebrationChocolate', '#SpecialOccasion'],
                'educational': ['#ChocolateFacts', '#ChocolateKnowledge', '#ChocolateCraft', '#LearnAboutChocolate', '#ChocolateMaking', '#ArtisanTechniques', '#ChocolateEducation'],
                'behind-scenes': ['#BehindTheScenes', '#ChocolateMaking', '#ArtisanProcess', '#HandcraftedWithLove', '#SmallBatchChocolate', '#ChocolateCraftsmanship', '#MadeByHand'],
                'lifestyle': ['#ChocolateLife', '#SelfCare', '#IndulgeYourself', '#ChocolateMoments', '#TreatYoSelf', '#LuxuryLifestyle', '#DailyIndulgence', '#ChocolateVibes'],
                'local-hamilton': ['#HamiltonPride', '#ShopLocalHamilton', '#HamiltonBusiness', '#JamesStreetNorthLife', '#HamiltonCommunity', '#LocallyMade', '#HamiltonLove'],
                'customer-engagement': ['#ChocolateLovers', '#ChocolateCommunity', '#ShareYourChocolate', '#ChocolateGoals', '#ChocolateTime', '#ChocolateObsessed']
            };

            // OCCASION/SEASONAL HASHTAGS
            const occasionTags = {
                'february': ['#ValentinesChocolate', '#ValentinesDay', '#LoveAndChocolate', '#RomanticGift', '#ValentinesTreat'],
                'march': ['#SpringChocolate', '#EasterChocolate', '#SpringTreats'],
                'april': ['#EasterChocolate', '#SpringVibes', '#MothersDay', '#SpringGifts'],
                'may': ['#MothersDay', '#MomDeservesChocolate', '#MothersDayGift', '#TreatMom'],
                'june': ['#FathersDay', '#DadDeservesChocolate', '#FathersDayGift', '#SummerChocolate'],
                'july': ['#SummerTreats', '#SummerChocolate', '#SweetSummer'],
                'august': ['#BackToSchool', '#TeacherAppreciation', '#SummerTreats'],
                'september': ['#FallFlavors', '#AutumnChocolate', '#FallTreats', '#CozyVibes'],
                'october': ['#Halloween', '#HalloweenChocolate', '#TrickOrTreat', '#SpookySeason', '#FallFlavors'],
                'november': ['#Thanksgiving', '#HolidayPrep', '#GivingThanks', '#FallFlavors', '#HolidaySeason'],
                'december': ['#ChristmasChocolate', '#HolidayGifts', '#FestiveChocolate', '#ChristmasGifts', '#HolidayTreats', '#SeasonOfGiving']
            };

            // AUDIENCE-SPECIFIC HASHTAGS
            const audienceTags = {
                'hamilton-locals': ['#HamiltonLocalBusiness', '#HamiltonCommunity', '#ShopLocalHamilton'],
                'gift-buyers': ['#ChocolateGifts', '#GiftIdeas', '#PerfectGift', '#ThoughtfulGifts'],
                'corporate': ['#CorporateGifts', '#BusinessGifts', '#ClientAppreciation', '#EmployeeRecognition'],
                'foodies': ['#FoodieLife', '#GourmetFood', '#FoodLovers', '#TasteTheDifference'],
                'luxury': ['#LuxuryChocolate', '#FinerThings', '#LuxuryGifts', '#PremiumQuality'],
                'millennials': ['#TreatYoSelf', '#InstaFood', '#FoodPorn', '#ChocolateGram']
            };

            // PRODUCT-TYPE HASHTAGS (detected from caption or product name)
            const productKeywords = {
                'truffle': ['#ChocolateTruffles', '#Truffles', '#GourmetTruffles'],
                'caramel': ['#Caramel', '#CaramelChocolate', '#SaltedCaramel'],
                'bark': ['#ChocolateBark', '#ChocolateBar', '#ChocolateSlabs'],
                'gift': ['#ChocolateGift', '#GiftBox', '#ChocolateGiftBox', '#GiftIdeas'],
                'box': ['#ChocolateBox', '#ChocolateAssortment', '#MixedChocolates'],
                'dark': ['#DarkChocolate', '#DarkChocolateLovers'],
                'milk': ['#MilkChocolate', '#Creamy'],
                'white': ['#WhiteChocolate'],
                'sea salt': ['#SeaSalt', '#SaltedChocolate'],
                'heart': ['#ChocolateHearts', '#HeartShaped'],
                'bar': ['#ChocolateBar', '#ChocolateBars']
            };

            // THEME/MOOD HASHTAGS (detected from caption content)
            const themeTags = {
                'love': ['#MadeWithLove', '#LoveInEveryBite', '#ChocolateLove'],
                'handmade': ['#Handmade', '#HandcraftedGoodness', '#MadeByHand'],
                'fresh': ['#FreshBatch', '#FreshlyMade', '#MadeDaily'],
                'quality': ['#QualityMatters', '#PremiumIngredients', '#TopQuality'],
                'gift': ['#PerfectGift', '#GiftWorthy', '#ThoughtfulGifts'],
                'treat': ['#TreatYourself', '#SweetTreat', '#Indulgence'],
                'artisan': ['#ArtisanMade', '#ArtisanQuality', '#CraftedWithCare'],
                'celebration': ['#Celebrate', '#CelebrationTime', '#SpecialMoment']
            };

            // SEO & LLM-OPTIMIZED TRENDING HASHTAGS
            const trendingTags = ['#ChocolateLovers', '#ChocolateAddict', '#ChocolateObsessed', '#ChocolateCommunity', '#ChocolateGram', '#FoodPorn', '#InstaChocolate', '#DessertGoals', '#SweetTooth', '#ChocoholicLife', '#FoodieFinds', '#LocalBusiness', '#SmallBusiness', '#SupportLocal'];

            // BUILD UNIQUE HASHTAG SET FOR THIS CAPTION
            let selectedTags = [...coreBrand]; // Always start with core brand

            // Add 1-2 location tags (rotate based on index)
            const locationPool = locationTags.slice((captionIndex * 2) % locationTags.length, ((captionIndex * 2) % locationTags.length) + 2);
            selectedTags.push(...locationPool);

            // Add 2-3 category-specific tags
            const catTags = categoryTags[options.category] || categoryTags['product-showcase'];
            const catPool = catTags.slice((captionIndex * 2) % catTags.length, ((captionIndex * 2) % catTags.length) + 3);
            selectedTags.push(...catPool);

            // Add seasonal/occasion tags if applicable
            if (options.season && options.season !== 'any' && occasionTags[options.season]) {
                const occasionPool = occasionTags[options.season].slice(0, 2);
                selectedTags.push(...occasionPool);
            }

            // Add audience-specific tags
            if (options.audience && audienceTags[options.audience]) {
                selectedTags.push(audienceTags[options.audience][captionIndex % audienceTags[options.audience].length]);
            }

            // Detect and add product-type tags from product name and caption
            const textToAnalyze = (options.productName + ' ' + captionText).toLowerCase();
            for (const [keyword, tags] of Object.entries(productKeywords)) {
                if (textToAnalyze.includes(keyword)) {
                    selectedTags.push(tags[0]); // Add primary tag
                    break; // Only add one product type
                }
            }

            // Detect and add theme tags from caption content
            for (const [keyword, tags] of Object.entries(themeTags)) {
                if (textToAnalyze.includes(keyword)) {
                    selectedTags.push(tags[captionIndex % tags.length]);
                }
            }

            // Add 1-2 trending/SEO tags (different for each caption)
            const trendingPool = trendingTags.slice((captionIndex * 2) % trendingTags.length, ((captionIndex * 2) % trendingTags.length) + 2);
            selectedTags.push(...trendingPool);

            // Remove duplicates and limit to 8-12 hashtags (Instagram best practice)
            selectedTags = [...new Set(selectedTags)];
            const maxTags = options.platform === 'instagram-story' ? 5 : (options.platform === 'pinterest' ? 8 : 10);
            selectedTags = selectedTags.slice(0, maxTags);

            // Format with emoji if requested
            const hashtagString = selectedTags.join(' ');
            return options.includeEmojis ? `üç´ ${hashtagString}` : hashtagString;
        }

        function buildSocialMediaCopy(options, isRegenerate = false) {
            const posts = [];
            const productName = options.productName || 'artisan chocolates';
            const isLocal = options.includeLocation;
            const useEmojis = options.includeEmojis;
            const addQuestions = options.includeQuestions;
            const useFormal = options.formalTone;

            // CTAs
            const ctas = {
                'instagram-square': options.strongCta ? ['Shop now - link in bio! üëÜ', 'Visit us on James Street North today!', 'Order online for local delivery! üöö', 'DM us to order! üí¨', 'Tap link in bio to shop! üõí'] : ['Link in bio', 'Visit us!', 'Order online', 'DM to order', 'Shop now'],
                'instagram-story': options.strongCta ? ['Swipe up to shop! üëÜ', 'Tap to visit us! üè™', 'DM to order now! üí¨', 'Link in bio! üîó'] : ['Swipe up', 'Tap to visit', 'DM us', 'Link in bio'],
                'facebook-ad': ['Shop Now', 'Learn More', 'Order Today', 'Visit Our Store', 'Get Yours Now', 'Buy Now', 'Discover More'],
                'pinterest': ['Save this pin! üìå', 'Click to shop! üõí', 'Visit our shop!', 'Learn more! ‚ÑπÔ∏è']
            };

            const platformCtas = ctas[options.platform];

            // Generate variations - pass isRegenerate flag
            const templates = getSocialMediaTemplates(options, isRegenerate);

            templates.forEach((template, index) => {
                const cta = platformCtas[index % platformCtas.length];
                let copy = template;

                // Add GIF suggestion if requested
                if (options.suggestGifs && index < 3) {
                    const gifSuggestions = ['chocolate melting', 'chocolate pouring', 'happy celebration', 'heart animation', 'sparkle effect'];
                    copy = `[GIF IDEA: ${gifSuggestions[index % gifSuggestions.length]}]\n\n${copy}`;
                }

                // Generate contextual hashtags for THIS specific caption
                const contextualHashtags = generateContextualHashtags(options, index, template);

                // Add CTA and hashtags
                if (options.platform === 'facebook-ad') {
                    copy = `${copy}\n\n${cta}`;
                } else {
                    copy = `${copy}\n\n${cta}\n\n${contextualHashtags}`;
                }

                posts.push({
                    number: index + 1,
                    copy: copy.trim(),
                    charCount: copy.length
                });
            });

            return posts.slice(0, 10);
        }

        function capitalizeFirst(str) {
            if (!str) return str;
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function shuffleArray(array) {
            // Fisher-Yates shuffle algorithm
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function getSocialMediaTemplates(options, isRegenerate = false) {
            const productName = capitalizeFirst(options.productName) || 'Artisan chocolates';
            // Capitalize BOTH custom occasion AND dropdown season
            const occasion = options.customOccasion ? capitalizeFirst(options.customOccasion) : (options.season && options.season !== 'any' ? capitalizeFirst(options.season) : '');
            const audience = options.customAudience || options.audience;
            const customCat = capitalizeFirst(options.customCategory);
            const emoji = options.includeEmojis;
            const question = options.includeQuestions;
            const formal = options.formalTone;
            const specialNotes = options.specialNotes || '';

            // Detect special occasions from special notes
            const notesLower = specialNotes.toLowerCase();
            const isBirthday = notesLower.includes('birthday') || notesLower.includes('bday') || notesLower.includes('b-day');
            const isAnniversary = notesLower.includes('anniversary');
            const isWedding = notesLower.includes('wedding');
            const isGraduation = notesLower.includes('graduation') || notesLower.includes('grad');
            const isCorporate = notesLower.includes('corporate') || notesLower.includes('client') || notesLower.includes('employee');

            // Extract name from special notes if present (e.g., "Sam Birthday" -> "Sam")
            let recipientName = '';
            if (isBirthday) {
                const nameMatch = specialNotes.match(/(\w+)['s]*\s*(birthday|bday|b-day)/i);
                if (nameMatch) recipientName = nameMatch[1];
            }

            let templates = [];
            const e = emoji; // shorthand

            // If special notes contain specific occasions, create occasion-themed captions
            if (isBirthday && recipientName) {
                templates.push(
                    `${e ? 'üéÇ ' : ''}Happy Birthday ${recipientName}! ${e ? 'üéâ ' : ''}Celebrate with our delicious ${productName} - the perfect birthday treat!${question ? ` ${e ? 'üç´ ' : ''}What better way to celebrate than with Hamilton's finest chocolate?` : ''}`,
                    `${e ? 'üéà ' : ''}${recipientName}'s birthday deserves something special! ${e ? 'üç´ ' : ''}Try our handcrafted ${productName} made fresh on James Street North.${question ? ` ${e ? 'üéÅ ' : ''}Ready to make this birthday unforgettable?` : ''}`,
                    `${e ? '‚ú® ' : ''}Birthday wishes for ${recipientName}! ${e ? 'üéÇ ' : ''}Our ${productName} are perfect for birthday celebrations.${question ? ` ${e ? 'üéâ ' : ''}Who else loves chocolate for their birthday?` : ''}`,
                    `${e ? 'üéÅ ' : ''}Make ${recipientName}'s birthday extra sweet with ${productName} from Chocolate on James! ${e ? 'üç´ ' : ''}Handmade with love in Hamilton.`,
                    `${e ? 'üéâ ' : ''}Celebrating ${recipientName} today! ${e ? 'üéÇ ' : ''}Our ${productName} are the perfect birthday surprise. Made fresh daily!${question ? ` ${e ? 'üéà ' : ''}What's your favorite birthday treat?` : ''}`,
                    `${e ? 'üç´ ' : ''}${recipientName}'s special day calls for special chocolate! ${e ? '‚ú® ' : ''}Treat them to our artisan ${productName}.${question ? ` ${e ? 'üíù ' : ''}Ready to make their day?` : ''}`,
                    `${e ? 'üéÇ ' : ''}Happy Birthday to ${recipientName}! ${e ? 'üéâ ' : ''}Celebrate with Hamilton's finest ${productName} - handcrafted perfection!`,
                    `${e ? 'üéà ' : ''}For ${recipientName}'s birthday: ${productName} that taste as amazing as they look! ${e ? 'üç´ ' : ''}Made with love on James Street North.${question ? ` ${e ? 'üòä ' : ''}Birthdays + chocolate = perfection?` : ''}`,
                    `${e ? '‚ú® ' : ''}${recipientName} deserves the best! ${e ? 'üéÇ ' : ''}Our ${productName} are handmade birthday perfection.${question ? ` ${e ? 'üéÅ ' : ''}How do you celebrate special birthdays?` : ''}`,
                    `${e ? 'üéâ ' : ''}Birthday celebration mode for ${recipientName}! ${e ? 'üç´ ' : ''}Nothing says "Happy Birthday" like our artisan ${productName}!`
                );
            } else if (isBirthday && !recipientName) {
                templates.push(
                    `${e ? 'üéÇ ' : ''}Happy Birthday! ${e ? 'üéâ ' : ''}Celebrate with our delicious ${productName} - the perfect birthday treat from Hamilton's finest!${question ? ` ${e ? 'üç´ ' : ''}What better way to celebrate?` : ''}`,
                    `${e ? 'üéà ' : ''}Birthday celebrations deserve special chocolate! ${e ? 'üç´ ' : ''}Our handcrafted ${productName} are made fresh on James Street North.${question ? ` ${e ? 'üéÅ ' : ''}Ready for birthday sweetness?` : ''}`,
                    `${e ? '‚ú® ' : ''}Make any birthday extra special with ${productName}! ${e ? 'üéÇ ' : ''}Handmade with love, perfect for celebrating.${question ? ` ${e ? 'üéâ ' : ''}Who's celebrating a birthday this week?` : ''}`,
                    `${e ? 'üéÅ ' : ''}Birthday treat alert! ${e ? 'üç´ ' : ''}Our ${productName} from Chocolate on James are birthday perfection.`,
                    `${e ? 'üéâ ' : ''}Celebrating birthdays the chocolate way! ${e ? 'üéÇ ' : ''}Our ${productName} are handmade birthday magic.${question ? ` ${e ? 'üéà ' : ''}What's your go-to birthday dessert?` : ''}`,
                    `${e ? 'üç´ ' : ''}Birthday sweetness: ${productName} edition! ${e ? '‚ú® ' : ''}Made fresh daily in Hamilton for all your celebrations.${question ? ` ${e ? 'üíù ' : ''}Ready to celebrate?` : ''}`,
                    `${e ? 'üéÇ ' : ''}The perfect birthday gift: artisan ${productName}! ${e ? 'üéâ ' : ''}Handcrafted on James Street North with love.`,
                    `${e ? 'üéà ' : ''}Birthday moments deserve ${productName}! ${e ? 'üç´ ' : ''}Hamilton's finest chocolate for your special day.${question ? ` ${e ? 'üòä ' : ''}Birthdays + chocolate = happiness?` : ''}`,
                    `${e ? '‚ú® ' : ''}Make birthdays unforgettable with our ${productName}! ${e ? 'üéÇ ' : ''}Handmade birthday perfection.${question ? ` ${e ? 'üéÅ ' : ''}How do you celebrate?` : ''}`,
                    `${e ? 'üéâ ' : ''}Birthday celebration mode activated! ${e ? 'üç´ ' : ''}Our artisan ${productName} are the ultimate birthday treat!`
                );
            } else if (isAnniversary) {
                templates.push(
                    `${e ? 'üíï ' : ''}Happy Anniversary! ${e ? '‚ú® ' : ''}Celebrate your love with our romantic ${productName} - handcrafted in Hamilton.${question ? ` ${e ? 'üç´ ' : ''}How many years of sweetness?` : ''}`,
                    `${e ? 'ü•Ç ' : ''}Anniversary celebrations deserve exceptional chocolate! ${e ? 'üíù ' : ''}Our ${productName} are the perfect way to say "I love you."`,
                    `${e ? 'üíñ ' : ''}Mark this special milestone with ${productName} from Chocolate on James! ${e ? '‚ú® ' : ''}Made with love for love.${question ? ` ${e ? 'üç´ ' : ''}What's your anniversary tradition?` : ''}`,
                    `${e ? 'üåπ ' : ''}Anniversary sweetness: ${productName} edition! ${e ? 'üíï ' : ''}Handmade on James Street North for your celebration.`,
                    `${e ? '‚ú® ' : ''}Celebrating love with Hamilton's finest ${productName}! ${e ? 'üíù ' : ''}Perfect for anniversaries and special moments.${question ? ` ${e ? 'ü•Ç ' : ''}How do you celebrate love?` : ''}`,
                    `${e ? 'üíñ ' : ''}Anniversary magic in every bite! ${e ? 'üç´ ' : ''}Our artisan ${productName} make love even sweeter.`,
                    `${e ? 'üíï ' : ''}For your anniversary: ${productName} crafted with the same care you put into your relationship! ${e ? '‚ú® ' : ''}`,
                    `${e ? 'ü•Ç ' : ''}Toast to love with our romantic ${productName}! ${e ? 'üíù ' : ''}Hamilton-made for your special day.${question ? ` ${e ? 'üåπ ' : ''}Chocolate or flowers?` : ''}`,
                    `${e ? 'üíñ ' : ''}Anniversary perfection: handmade ${productName} from Chocolate on James! ${e ? '‚ú® ' : ''}Made for celebrating love.`,
                    `${e ? 'üíï ' : ''}Sweet anniversary moments deserve sweet ${productName}! ${e ? 'üç´ ' : ''}Artisan quality, romantic results!`
                );
            } else if (isWedding) {
                templates.push(
                    `${e ? 'üíí ' : ''}Wedding sweetness! ${e ? '‚ú® ' : ''}Our elegant ${productName} are perfect for your special day.${question ? ` ${e ? 'üç´ ' : ''}Looking for wedding favors?` : ''}`,
                    `${e ? 'üë∞ ' : ''}Make your wedding unforgettable with ${productName} from Chocolate on James! ${e ? 'üíù ' : ''}Handcrafted luxury for your guests.`,
                    `${e ? 'üíç ' : ''}Wedding day perfection: artisan ${productName}! ${e ? '‚ú® ' : ''}Elegant, delicious, and made in Hamilton.${question ? ` ${e ? 'ü•Ç ' : ''}Planning your dream wedding?` : ''}`,
                    `${e ? 'ü§µ ' : ''}Treat your wedding guests to Hamilton's finest ${productName}! ${e ? 'üíí ' : ''}Handmade elegance for your celebration.`,
                    `${e ? 'üíù ' : ''}Wedding favors with wow factor: our ${productName}! ${e ? '‚ú® ' : ''}Made fresh on James Street North.${question ? ` ${e ? 'üë∞ ' : ''}Want to impress your guests?` : ''}`,
                    `${e ? 'üíç ' : ''}For your special day: premium ${productName} from Chocolate on James! ${e ? 'üíí ' : ''}Wedding-worthy chocolate!`,
                    `${e ? 'ü•Ç ' : ''}Wedding magic in every bite! ${e ? 'üç´ ' : ''}Our ${productName} add sweetness to your celebration.`,
                    `${e ? 'üë∞ ' : ''}Perfect wedding treats: handcrafted ${productName}! ${e ? '‚ú® ' : ''}Hamilton quality for your big day.${question ? ` ${e ? 'üíù ' : ''}Ready to wow your guests?` : ''}`,
                    `${e ? 'üíí ' : ''}From our hands to your wedding: artisan ${productName}! ${e ? 'üç´ ' : ''}Made with love and attention to detail.`,
                    `${e ? 'üíç ' : ''}Wedding celebration sweetness! ${e ? '‚ú® ' : ''}Our ${productName} make perfect favors and gifts!`
                );
            } else if (specialNotes && specialNotes.length > 3) {
                // Generic special request captions
                templates.push(
                    `${e ? '‚ú® ' : ''}Special request: ${productName} made just for you! ${e ? 'üç´ ' : ''}Handcrafted in Hamilton with personal attention.${question ? ` ${e ? 'üíù ' : ''}What makes your order special?` : ''}`,
                    `${e ? 'üéÅ ' : ''}Custom ${productName} from Chocolate on James! ${e ? '‚ú® ' : ''}We love bringing your special ideas to life.`,
                    `${e ? 'üíù ' : ''}Your special ${productName} order: handmade with extra care! ${e ? 'üç´ ' : ''}Hamilton quality, personalized touch.${question ? ` ${e ? 'üòä ' : ''}Have a special request?` : ''}`,
                    `${e ? '‚ú® ' : ''}Making magic happen: custom ${productName}! ${e ? 'üéÅ ' : ''}Personalized chocolate from James Street North.`,
                    `${e ? 'üç´ ' : ''}Special orders are our specialty! ${e ? 'üíù ' : ''}Try our ${productName} made exactly how you want them.${question ? ` ${e ? '‚ú® ' : ''}Ready for something unique?` : ''}`,
                    `${e ? 'üéÅ ' : ''}Personalized ${productName} perfection! ${e ? 'üç´ ' : ''}We bring your chocolate vision to life in Hamilton.`,
                    `${e ? '‚ú® ' : ''}Your custom ${productName} request: our pleasure! ${e ? 'üíù ' : ''}Handcrafted with personal attention.`,
                    `${e ? 'üç´ ' : ''}Special occasion, special ${productName}! ${e ? 'üéÅ ' : ''}Made to order on James Street North.${question ? ` ${e ? 'üòä ' : ''}What's your vision?` : ''}`,
                    `${e ? 'üíù ' : ''}Custom chocolate artistry: ${productName} edition! ${e ? '‚ú® ' : ''}Your ideas, our craftsmanship.`,
                    `${e ? 'üéÅ ' : ''}Making your ${productName} dreams come true! ${e ? 'üç´ ' : ''}Personalized, handmade, Hamilton-proud!`
                );
            }

            // Only use category-based templates if special notes didn't generate templates
            if (templates.length === 0) {
                // If custom category, create custom-themed captions
                if (options.category === 'custom' && customCat) {
                templates.push(
                    `${e ? '‚ú® ' : ''}${customCat}: ${productName} from Chocolate on James, Hamilton's premier chocolatier. ${e ? 'üç´' : ''} Handcrafted with passion on James Street North.`,
                    `${e ? 'üéâ ' : ''}Special feature: ${customCat}! Enjoy ${productName} made fresh daily in Hamilton with premium ingredients and artisan care.`,
                    `${e ? 'üíù ' : ''}${customCat} - Because every moment deserves exceptional chocolate! Try our ${productName} today.`,
                    `Hamilton's finest: ${productName} created especially for ${customCat}. ${e ? '‚ú® ' : ''}Visit us on James Street North or order online!`,
                    `${e ? 'üåü ' : ''}${customCat}: We're celebrating with our signature ${productName}. Made in Hamilton with love!`,
                    `${customCat} calls for exceptional chocolate! ${e ? 'üç´ ' : ''}Our ${productName} are handcrafted in small batches for maximum quality.`,
                    `${e ? 'üèôÔ∏è ' : ''}Proud to bring you ${customCat} featuring ${productName}. Hamilton-made, world-class quality!`,
                    `${customCat}: ${productName} that make every occasion special. ${e ? '‚ú® ' : ''}From our hands to your heart.`,
                    `${e ? 'üíõ ' : ''}${customCat} - ${productName} crafted with care on Hamilton's James Street North. Taste the artisan difference!`,
                    `Celebrating ${customCat} with our premium ${productName}. ${e ? 'üç´ ' : ''}Made fresh, tastes amazing, creates memories!`
                );
            } else if (options.category === 'product-showcase') {
                // PRODUCT SHOWCASE - 10 unique variations
                if (formal) {
                    templates.push(
                        `Discover our exquisite ${productName}, handcrafted with premium ingredients at Chocolate on James. Each piece represents our commitment to artisan excellence.`,
                        `Introducing ${productName} - a masterpiece of chocolate craftsmanship from Hamilton's premier chocolatier. Refined taste for discerning palates.`,
                        `Experience the exceptional quality of ${productName}. Meticulously created using traditional European techniques on James Street North.`,
                        `Our ${productName} showcase the finest cocoa beans, transformed into luxurious confections by skilled artisans.`,
                        `Presenting ${productName}: where premium ingredients meet time-honored chocolate-making expertise. Available at Chocolate on James.`,
                        `Elevate your chocolate experience with our ${productName}. Handcrafted daily in small batches for uncompromising quality.`,
                        `The artistry behind ${productName}: premium cocoa, expert technique, unwavering dedication. Discover Hamilton's chocolate excellence.`,
                        `${productName} from Chocolate on James - a testament to artisan craftsmanship and ingredient perfection.`,
                        `Indulge in ${productName}, created with passion and precision on Hamilton's James Street North. Quality you can taste in every bite.`,
                        `Our signature ${productName} represent years of perfecting the craft. Experience chocolate as it should be.`
                    );
                } else {
                    templates.push(
                        `${e ? '‚ú® ' : ''}Feast your eyes on our ${productName}! ${e ? 'üç´ ' : ''}Handmade daily with love on James Street North.${question ? ` ${e ? 'üòç ' : ''}Which one would you pick first?` : ''}`,
                        `${e ? 'üåü ' : ''}Pure chocolate magic: ${productName} made fresh today!${question ? ` ${e ? 'ü§î ' : ''}Ready to treat yourself?` : ''} ${e ? 'üç´ ' : ''}Find us in Hamilton!`,
                        `${e ? 'üí´ ' : ''}Meet ${productName} - your new favorite indulgence! ${e ? 'üç´ ' : ''}Crafted by hand, loved by chocolate enthusiasts everywhere.${question ? ` ${e ? '‚ù§Ô∏è ' : ''}What's your go-to chocolate flavor?` : ''}`,
                        `Behold! ${productName} in all their glory. ${e ? '‚ú®üç´ ' : ''}Every piece is a work of art, made with premium ingredients right here in Hamilton.${question ? ` ${e ? 'üé® ' : ''}Too pretty to eat? Almost!` : ''}`,
                        `${e ? 'üòç ' : ''}Showing off our gorgeous ${productName} today! ${e ? 'üç´ ' : ''}Handcrafted on James Street North using time-tested techniques.${question ? ` ${e ? 'üí≠ ' : ''}Can you taste it through the screen?` : ''}`,
                        `${e ? 'üéÅ ' : ''}Presenting: ${productName}! ${e ? '‚ú® ' : ''}Each one made with care, passion, and the finest ingredients.${question ? ` ${e ? 'üç´ ' : ''}Which variety calls your name?` : ''}`,
                        `${productName} alert! ${e ? 'üö®üç´ ' : ''}Fresh batch just finished cooling. ${e ? 'üòä ' : ''}Come grab them while they're new!${question ? ` ${e ? '‚è∞ ' : ''}Who's stopping by today?` : ''}`,
                        `${e ? 'üåà ' : ''}Look at these beautiful ${productName}! ${e ? 'üç´ ' : ''}Made from scratch daily at Chocolate on James.${question ? ` ${e ? '‚ú® ' : ''}Ever wondered what makes artisan chocolate different?` : ''}`,
                        `${e ? 'üíù ' : ''}Today's star: ${productName}! ${e ? 'üç´ ' : ''}Handmade in Hamilton with ingredients we're proud of.${question ? ` ${e ? 'ü§ó ' : ''}Ready for a chocolate upgrade?` : ''}`,
                        `Check out our ${productName}! ${e ? '‚ú®üç´ ' : ''}Every single piece crafted by hand on James Street North.${question ? ` ${e ? 'üòã ' : ''}What makes YOUR perfect chocolate?` : ''}`
                    );
                }
            } else if (options.category === 'promotional') {
                // PROMOTIONAL - 10 unique variations
                if (formal) {
                    templates.push(
                        `Exclusive offer on our ${productName}. Experience Hamilton's finest artisan chocolate at an exceptional value.`,
                        `Special promotion: ${productName} now available at a limited-time price. Discover why Hamilton chooses Chocolate on James.`,
                        `Introducing our ${productName} promotion. Premium quality, artisan craftsmanship, unbeatable value. Visit us on James Street North.`,
                        `Limited time: ${productName} featuring our signature quality at promotional pricing. Excellence made accessible.`,
                        `Don't miss our ${productName} offer. Handcrafted luxury at prices designed to delight. Available while supplies last.`,
                        `Special savings on ${productName}. The same exceptional quality, extraordinary value. Shop Chocolate on James today.`,
                        `${productName} promotion now active. Premium artisan chocolate from Hamilton's trusted chocolatier, specially priced.`,
                        `Exclusive opportunity: ${productName} at promotional pricing. Handmade quality meets exceptional value.`,
                        `Time-sensitive offer on our celebrated ${productName}. Experience the difference artisan quality makes.`,
                        `${productName} special now available. Superior ingredients, expert craftsmanship, limited-time pricing.`
                    );
                } else {
                    templates.push(
                        `${e ? 'üéâ ' : ''}SALE ALERT! ${productName} on special RIGHT NOW! ${e ? 'üç´ ' : ''}Stock up on your favorites while this deal lasts!${question ? ` ${e ? 'üõí ' : ''}What are you waiting for?` : ''}`,
                        `${e ? 'üî• ' : ''}Hot deal: ${productName} at AMAZING prices! ${e ? 'üç´‚ú® ' : ''}Quality you love, price you'll love even more!${question ? ` ${e ? 'üòç ' : ''}Ready to save big?` : ''}`,
                        `${e ? 'üí∞ ' : ''}Your wallet will thank you! ${productName} on sale NOW! ${e ? 'üç´ ' : ''}Same handcrafted quality, better price!${question ? ` ${e ? 'üéÅ ' : ''}Perfect for gifting or keeping all to yourself?` : ''}`,
                        `${e ? '‚ö° ' : ''}Flash deal on ${productName}! ${e ? 'üç´ ' : ''}Don't miss out - this won't last long! Hamilton's best chocolate at unbeatable prices.${question ? ` ${e ? '‚è∞ ' : ''}How many are you grabbing?` : ''}`,
                        `${e ? 'üéä ' : ''}Special promo: ${productName} are calling your name! ${e ? 'üç´ ' : ''}Handmade in Hamilton, priced to make you smile!${question ? ` ${e ? 'üòä ' : ''}Treating yourself or someone special?` : ''}`,
                        `${e ? '‚ú® ' : ''}Limited time only: ${productName} at incredible prices! ${e ? 'üç´üí´ ' : ''}Get them before they're gone!${question ? ` ${e ? 'üèÉ ' : ''}Who's racing over?` : ''}`,
                        `${e ? 'üåü ' : ''}PROMO TIME! ${productName} marked down! ${e ? 'üç´ ' : ''}Premium chocolate, sweet savings. That's what we call a win-win!${question ? ` ${e ? 'üôå ' : ''}In or in?` : ''}`,
                        `${e ? 'üéÅ ' : ''}Gift yourself ${productName} without the guilt! ${e ? 'üç´ ' : ''}Our sale makes premium chocolate totally affordable!${question ? ` ${e ? 'üíù ' : ''}Self-care or share the love?` : ''}`,
                        `${e ? 'üí• ' : ''}DEAL DROP: ${productName} on major sale! ${e ? 'üç´ ' : ''}James Street North quality, prices that'll make your day!${question ? ` ${e ? 'ü§© ' : ''}Can you believe these prices?` : ''}`,
                        `${e ? 'üîî ' : ''}DING DING DING! ${productName} sale is LIVE! ${e ? 'üç´‚ú® ' : ''}Handcrafted Hamilton chocolate at prices too good to pass up!${question ? ` ${e ? 'üõçÔ∏è ' : ''}Shopping online or in-store?` : ''}`
                    );
                }
            } else if (options.category === 'seasonal') {
                // SEASONAL - 10 unique variations
                const seasonalWord = occasion || 'this season';
                if (formal) {
                    templates.push(
                        `Celebrate ${seasonalWord} with our exclusive ${productName}. Handcrafted for the occasion at Chocolate on James.`,
                        `Our ${productName} capture the essence of ${seasonalWord}. Limited availability - order from Hamilton's premier chocolatier today.`,
                        `Seasonal excellence: ${productName} created specifically for ${seasonalWord}. Reserve yours at Chocolate on James.`,
                        `Mark ${seasonalWord} with ${productName} from our artisan collection. Handmade with festive attention to detail.`,
                        `${productName} - our special tribute to ${seasonalWord}. Crafted with seasonal inspiration on James Street North.`,
                        `Commemorate ${seasonalWord} with exceptional ${productName}. Limited edition quality from Chocolate on James.`,
                        `For ${seasonalWord}, we present ${productName}. Artisan-crafted to make your celebration memorable.`,
                        `Elevate ${seasonalWord} celebrations with our ${productName}. Handmade seasonal perfection in Hamilton.`,
                        `Our ${productName} honor the spirit of ${seasonalWord}. Premium ingredients, festive presentation, unforgettable taste.`,
                        `Make ${seasonalWord} special with ${productName}. Seasonal artisan chocolate from Hamilton's finest.`
                    );
                } else {
                    templates.push(
                        `${e ? 'üéÑ‚ú® ' : ''}${seasonalWord} just got SWEETER! ${productName} are here! ${e ? 'üç´ ' : ''}Limited edition magic made in Hamilton!${question ? ` ${e ? 'üéÅ ' : ''}Who's on your gift list?` : ''}`,
                        `${e ? 'üéâ ' : ''}IT'S HAPPENING! ${productName} for ${seasonalWord}! ${e ? 'üç´üí´ ' : ''}Grab them while you can - they won't last!${question ? ` ${e ? '‚è∞ ' : ''}Early bird or last minute shopper?` : ''}`,
                        `${e ? '‚ú® ' : ''}Ready for ${seasonalWord}? We are! ${productName} available NOW! ${e ? 'üç´ ' : ''}Made special, just for this time of year!${question ? ` ${e ? 'üåü ' : ''}What's your favorite holiday tradition?` : ''}`,
                        `${e ? 'üéä ' : ''}Seasonal drop: ${productName}! ${e ? 'üç´ ' : ''}Perfect for ${seasonalWord} gifting OR keeping! We don't judge! ${e ? 'üòâ' : ''}${question ? ` ${e ? 'üéÅ ' : ''}Both?` : ''}`,
                        `${e ? 'üíù ' : ''}Celebrate ${seasonalWord} the chocolate way! ${productName} fresh and ready! ${e ? 'üç´‚ú® ' : ''}Handmade in Hamilton with festive love!${question ? ` ${e ? 'ü•≥ ' : ''}How do YOU celebrate?` : ''}`,
                        `${e ? 'üåü ' : ''}Only happens once a year: ${productName} for ${seasonalWord}! ${e ? 'üç´ ' : ''}Get them before they're a memory!${question ? ` ${e ? 'üì∏ ' : ''}Making memories this year?` : ''}`,
                        `${e ? 'üéÅ ' : ''}${seasonalWord} essentials: ‚úÖ Joy ‚úÖ Family ‚úÖ ${productName}! ${e ? 'üç´ ' : ''}Check out our seasonal collection!${question ? ` ${e ? 'üòä ' : ''}What's missing from your celebration?` : ''}`,
                        `${e ? '‚ú® ' : ''}Make ${seasonalWord} unforgettable with ${productName}! ${e ? 'üç´üíï ' : ''}Limited time, unlimited deliciousness!${question ? ` ${e ? 'üéâ ' : ''}Ready to create sweet memories?` : ''}`,
                        `${e ? 'üéÑ ' : ''}The countdown is ON! ${productName} for ${seasonalWord}! ${e ? 'üç´ ' : ''}Order now from Hamilton's chocolate HQ!${question ? ` ${e ? 'üõí ' : ''}Procrastinating or planning ahead?` : ''}`,
                        `${e ? 'üí´ ' : ''}${seasonalWord} magic in chocolate form: ${productName}! ${e ? 'üç´‚ú® ' : ''}Handcrafted with seasonal cheer on James Street North!${question ? ` ${e ? 'üéä ' : ''}Feeling festive yet?` : ''}`
                    );
                }
            } else if (options.category === 'educational') {
                // EDUCATIONAL - 10 unique variations
                if (formal) {
                    templates.push(
                        `Behind every piece of ${productName} lies a meticulous process. Discover the artisan techniques we employ at Chocolate on James.`,
                        `The creation of ${productName} begins with selecting premium cocoa beans. Learn about our sourcing standards and chocolate-making process.`,
                        `Understanding chocolate: ${productName} demonstrate how quality ingredients and expert technique create exceptional results.`,
                        `From bean to bar: our ${productName} represent hours of careful craftsmanship. Explore the art of chocolate making with us.`,
                        `The science and art of ${productName}: temperature control, timing, and ingredient selection all contribute to perfection.`,
                        `What distinguishes ${productName} from mass-produced alternatives? Artisan methods, premium ingredients, and dedication to craft.`,
                        `Educational insight: ${productName} showcase traditional European chocolate-making techniques adapted for Hamilton.`,
                        `The craftsmanship of ${productName}: each step from tempering to molding requires precision and experience.`,
                        `Chocolate 101: Our ${productName} demonstrate how quality cocoa, proper technique, and passion create memorable confections.`,
                        `Discover the difference: ${productName} made using time-honored methods at Chocolate on James. Quality you can taste.`
                    );
                } else {
                    templates.push(
                        `${e ? 'üéì ' : ''}Chocolate 101: Ever wonder how ${productName} are made? ${e ? 'üç´ ' : ''}Let us show you the magic behind the scenes!${question ? ` ${e ? '‚ú® ' : ''}Ready for a sweet education?` : ''}`,
                        `${e ? 'üí° ' : ''}Fun fact: ${productName} go through 7 different steps before reaching you! ${e ? 'üç´ ' : ''}Quality takes time, and we take our time!${question ? ` ${e ? 'ü§î ' : ''}Guess which step takes longest?` : ''}`,
                        `${e ? 'üî¨ ' : ''}The secret to ${productName}? Temperature control! ${e ? 'üç´üå°Ô∏è ' : ''}We temper our chocolate to perfection - that's why it has that perfect snap!${question ? ` ${e ? 'üòç ' : ''}Love that snap sound too?` : ''}`,
                        `${e ? 'üìö ' : ''}Did you know? ${productName} taste better because we use REAL cocoa butter! ${e ? 'üç´ ' : ''}No shortcuts = no comparison!${question ? ` ${e ? 'üëÖ ' : ''}Can you taste the difference?` : ''}`,
                        `${e ? '‚ú® ' : ''}Chocolate science: Our ${productName} are made in small batches for quality control! ${e ? 'üç´ ' : ''}Big factory = mass production. Small batch = perfection!${question ? ` ${e ? 'üèÜ ' : ''}Which would you choose?` : ''}`,
                        `${e ? 'üåç ' : ''}From bean to bar: ${productName} start as cocoa beans from sustainable farms! ${e ? 'üç´üíö ' : ''}Good chocolate starts with good sourcing!${question ? ` ${e ? 'üå± ' : ''}Care where your chocolate comes from?` : ''}`,
                        `${e ? 'üë®‚Äçüç≥ ' : ''}Master chocolatier tip: ${productName} require exact timing! ${e ? 'üç´‚è±Ô∏è ' : ''}Too fast = grainy. Too slow = dull. Just right = PERFECT!${question ? ` ${e ? 'üòã ' : ''}Appreciate the craft?` : ''}`,
                        `${e ? 'üíé ' : ''}Why are ${productName} so smooth? We conche our chocolate for HOURS! ${e ? 'üç´ ' : ''}This old-school technique = modern luxury!${question ? ` ${e ? '‚ú® ' : ''}Feel the difference?` : ''}`,
                        `${e ? 'üé® ' : ''}Art meets science: ${productName} are hand-finished for perfection! ${e ? 'üç´ ' : ''}Machines can't replicate the human touch!${question ? ` ${e ? 'üñêÔ∏è ' : ''}See the artisan difference?` : ''}`,
                        `${e ? 'üìñ ' : ''}Story time: Each ${productName} contains premium ingredients we personally test! ${e ? 'üç´ ' : ''}Quality control = taste testing! Tough job! ${e ? 'üòÑ' : ''}${question ? ` ${e ? 'ü§ó ' : ''}Want our job?` : ''}`
                    );
                }
            } else if (options.category === 'behind-scenes') {
                // BEHIND-THE-SCENES - 10 unique variations
                if (formal) {
                    templates.push(
                        `A glimpse into our workspace: creating ${productName} at Chocolate on James. Craftsmanship in action.`,
                        `Behind the scenes at James Street North: our team handcrafting ${productName} with precision and care.`,
                        `The artisan process revealed: watch ${productName} take shape in our Hamilton chocolate kitchen.`,
                        `From our hands to yours: the dedication behind every batch of ${productName}. Quality is our commitment.`,
                        `Inside our chocolate atelier: the careful creation of ${productName}. Traditional methods, exceptional results.`,
                        `Meet the makers: our artisans crafting ${productName} using time-tested techniques and premium ingredients.`,
                        `The workshop perspective: ${productName} in production at Chocolate on James. Passion meets precision.`,
                        `Artisan excellence in process: creating ${productName} requires skill, patience, and attention to detail.`,
                        `Behind every ${productName} stands dedicated craftsmanship. Welcome to our Hamilton chocolate workspace.`,
                        `The reality of artisan chocolate: our team creating ${productName} by hand, one batch at a time.`
                    );
                } else {
                    templates.push(
                        `${e ? 'üëÄ ' : ''}Sneak peek! Making ${productName} RIGHT NOW! ${e ? 'üç´‚ú® ' : ''}This is where the magic happens on James Street North!${question ? ` ${e ? 'üé• ' : ''}Want more behind-the-scenes?` : ''}`,
                        `${e ? 'üëê ' : ''}Meet your chocolate maker! ${e ? 'üç´ ' : ''}Every ${productName} touched by these hands! Made with love in Hamilton!${question ? ` ${e ? 'üíï ' : ''}Ever met your chocolatier?` : ''}`,
                        `${e ? 'üé¨ ' : ''}BTS at the chocolate shop: ${productName} in the making! ${e ? 'üç´ ' : ''}Spoiler alert: it's messy, it's sweet, it's WORTH IT!${question ? ` ${e ? 'üòÑ ' : ''}Messy kitchen = good chocolate?` : ''}`,
                        `${e ? '‚è∞ ' : ''}5 AM at Chocolate on James: making your ${productName}! ${e ? 'üç´‚òï ' : ''}Early bird gets the chocolate! Fresh batch coming up!${question ? ` ${e ? 'üåÖ ' : ''}Morning person or night owl?` : ''}`,
                        `${e ? 'üî• ' : ''}Hot chocolate (literally): tempering ${productName} to perfection! ${e ? 'üç´ ' : ''}The temperature has to be EXACT! Science meets art!${question ? ` ${e ? 'üå°Ô∏è ' : ''}Ever tried tempering chocolate?` : ''}`,
                        `${e ? 'üí™ ' : ''}Arm workout: stirring ${productName} for 20 minutes straight! ${e ? 'üç´ ' : ''}This is love, dedication, and biceps! No machines here!${question ? ` ${e ? 'üòÖ ' : ''}Respect the hustle?` : ''}`,
                        `${e ? '‚úã ' : ''}Hands-on chocolate making: shaping ${productName} one by one! ${e ? 'üç´ ' : ''}Each piece gets personal attention! That's the artisan way!${question ? ` ${e ? 'ü§≤ ' : ''}Can you see the difference?` : ''}`,
                        `${e ? 'üé® ' : ''}The messy truth: creating ${productName} is an art! ${e ? 'üç´ ' : ''}Chocolate EVERYWHERE! But the results? *chef's kiss* ${e ? 'üòò' : ''}${question ? ` ${e ? 'üñºÔ∏è ' : ''}Worth the mess?` : ''}`,
                        `${e ? 'üì¶ ' : ''}Fresh off the line: ${productName} cooling down! ${e ? 'üç´ ' : ''}From our kitchen to your hands in hours, not days!${question ? ` ${e ? '‚ö° ' : ''}How fresh is TOO fresh?` : ''}`,
                        `${e ? 'üë®‚Äçüç≥ ' : ''}Day in the life: crafting ${productName} from scratch! ${e ? 'üç´‚ú® ' : ''}This is why we do what we do! Pure passion!${question ? ` ${e ? '‚ù§Ô∏è ' : ''}Can you feel the love?` : ''}`
                    );
                }
            } else if (options.category === 'lifestyle') {
                // LIFESTYLE - 10 unique variations
                if (formal) {
                    templates.push(
                        `Elevate your moments with ${productName} from Chocolate on James. Sophisticated indulgence for life's pleasures.`,
                        `The art of treating yourself: ${productName} transform ordinary moments into memorable experiences.`,
                        `Lifestyle luxury: ${productName} complement your refined tastes. Handcrafted excellence from Hamilton.`,
                        `Moments worth savoring deserve ${productName}. Premium quality for those who appreciate the finer things.`,
                        `Integrate ${productName} into your self-care ritual. Quality chocolate as a form of mindful indulgence.`,
                        `For those who value craftsmanship: ${productName} represent the lifestyle you've cultivated.`,
                        `Enhance everyday elegance with ${productName}. Small luxuries that make life richer.`,
                        `The discerning choice: ${productName} for individuals who refuse to compromise on quality.`,
                        `Lifestyle statement: choosing ${productName} reflects your appreciation for artisan excellence.`,
                        `Your daily luxury: ${productName} from Chocolate on James. Because you deserve exceptional.`
                    );
                } else {
                    templates.push(
                        `${e ? '‚ú® ' : ''}Treat yourself energy: ${productName} + good vibes only! ${e ? 'üç´üíÜ ' : ''}Self-care looks delicious!${question ? ` ${e ? 'üßò ' : ''}What's YOUR self-care ritual?` : ''}`,
                        `${e ? '‚òï ' : ''}Perfect pairing: morning coffee + ${productName}! ${e ? 'üç´ ' : ''}Start your day the RIGHT way! Hamilton knows how to live!${question ? ` ${e ? 'üåÖ ' : ''}Coffee or tea person?` : ''}`,
                        `${e ? 'üõãÔ∏è ' : ''}Cozy vibes: Netflix, blanket, and ${productName}! ${e ? 'üç´‚ú® ' : ''}This is what peak relaxation looks like!${question ? ` ${e ? 'üì∫ ' : ''}What are you binging?` : ''}`,
                        `${e ? 'üåô ' : ''}End your day right: ${productName} + your favorite book! ${e ? 'üç´üìñ ' : ''}Little luxuries make life sweet!${question ? ` ${e ? 'üí´ ' : ''}Night owl reader?` : ''}`,
                        `${e ? 'ü•Ç ' : ''}Celebrating YOU today with ${productName}! ${e ? 'üç´ ' : ''}No special occasion needed! You ARE the occasion!${question ? ` ${e ? 'üéâ ' : ''}When did you last celebrate yourself?` : ''}`,
                        `${e ? 'üíù ' : ''}Love language: ${productName}! ${e ? 'üç´ ' : ''}Gifting yourself counts! Actually, it's REQUIRED!${question ? ` ${e ? 'üòä ' : ''}What's YOUR love language?` : ''}`,
                        `${e ? 'üè° ' : ''}Sunday mood: lazy morning + ${productName}! ${e ? 'üç´‚òï ' : ''}No rush, no stress, just chocolate bliss!${question ? ` ${e ? 'üòå ' : ''}Perfect Sunday or what?` : ''}`,
                        `${e ? '‚úàÔ∏è ' : ''}Travel essential: ${productName} for the road! ${e ? 'üç´ ' : ''}Every adventure needs good snacks!${question ? ` ${e ? 'üó∫Ô∏è ' : ''}Where are you heading?` : ''}`,
                        `${e ? 'üëØ ' : ''}Girls night must-have: ${productName}! ${e ? 'üç´‚ú® ' : ''}Good friends + good chocolate = best memories!${question ? ` ${e ? 'üç∑ ' : ''}Wine or chocolate? Both?` : ''}`,
                        `${e ? 'üåü ' : ''}Live your best life with ${productName}! ${e ? 'üç´ ' : ''}Small pleasures, big happiness! That's the Hamilton way!${question ? ` ${e ? 'üòç ' : ''}What makes YOUR life sweet?` : ''}`
                    );
                }
            } else if (options.category === 'local-hamilton') {
                // LOCAL HAMILTON - 10 unique variations
                if (formal) {
                    templates.push(
                        `Hamilton pride in every piece: ${productName} crafted on James Street North. Supporting local excellence.`,
                        `Celebrating our community with ${productName}. Handmade in Hamilton, enjoyed by neighbors who appreciate quality.`,
                        `James Street North artisan tradition: ${productName} represent Hamilton's commitment to craftsmanship.`,
                        `Local business, exceptional quality: ${productName} from Chocolate on James. Hamilton's chocolate destination.`,
                        `Supporting Hamilton means choosing ${productName}. Locally crafted, community supported, universally loved.`,
                        `The Hamilton difference: ${productName} made by your neighbors on James Street North.`,
                        `Community craftsmanship: ${productName} embody what makes Hamilton's local business scene exceptional.`,
                        `Choose local, choose quality: ${productName} from your James Street North chocolatier.`,
                        `Hamilton-made excellence: ${productName} supporting our community, one delicious piece at a time.`,
                        `Your neighborhood chocolatier: ${productName} handcrafted with Hamilton pride.`
                    );
                } else {
                    templates.push(
                        `${e ? 'üèôÔ∏è ' : ''}HAMILTON PROUD! ${productName} made right here on James Street North! ${e ? 'üç´ ' : ''}Support local, taste the difference!${question ? ` ${e ? '‚ù§Ô∏è ' : ''}What's YOUR favorite local spot?` : ''}`,
                        `${e ? 'üé® ' : ''}James Street vibes: grab ${productName} after Art Crawl! ${e ? 'üç´ ' : ''}Local art + local chocolate = perfect Friday!${question ? ` ${e ? 'üñºÔ∏è ' : ''}See you at the next crawl?` : ''}`,
                        `${e ? 'üíõ ' : ''}Shout out to the Hammer! ${productName} made WITH LOVE in Hamilton! ${e ? 'üç´ ' : ''}Your city, your chocolate!${question ? ` ${e ? 'üè† ' : ''}Born and raised or new to the area?` : ''}`,
                        `${e ? 'üö∂ ' : ''}Walking James Street? Stop in for ${productName}! ${e ? 'üç´ ' : ''}We're your neighborhood chocolate spot! Come say hi!${question ? ` ${e ? 'üëã ' : ''}What brings you downtown?` : ''}`,
                        `${e ? '‚ö° ' : ''}The HamOnt way: ${productName} made by locals, for locals! ${e ? 'üç´ ' : ''}Supporting us supports YOUR community!${question ? ` ${e ? 'üôå ' : ''}Love shopping local?` : ''}`,
                        `${e ? 'üåÜ ' : ''}Hamilton's hidden gem: ${productName} on James Street North! ${e ? 'üç´‚ú® ' : ''}Show your out-of-town friends what we're about!${question ? ` ${e ? 'üì∏ ' : ''}Proud Hamiltonian?` : ''}`,
                        `${e ? 'üé≠ ' : ''}From Supercrawl to everyday: ${productName} fuel Hamilton's culture! ${e ? 'üç´ ' : ''}We're part of what makes this city amazing!${question ? ` ${e ? 'üé™ ' : ''}Favorite Hamilton event?` : ''}`,
                        `${e ? 'üè™ ' : ''}Small business, BIG flavor: ${productName} handmade in Hamilton! ${e ? 'üç´ ' : ''}Every purchase supports your neighbors!${question ? ` ${e ? 'üí™ ' : ''}Team local all the way?` : ''}`,
                        `${e ? 'üó∫Ô∏è ' : ''}Put Hamilton on the map with ${productName}! ${e ? 'üç´ ' : ''}World-class chocolate from YOUR backyard!${question ? ` ${e ? 'üåç ' : ''}Ever brag about Hamilton?` : ''}`,
                        `${e ? 'üíö ' : ''}For the love of Hamilton: ${productName} made here, loved everywhere! ${e ? 'üç´ ' : ''}Local roots, quality that travels!${question ? ` ${e ? '‚úàÔ∏è ' : ''}Take us with you?` : ''}`
                    );
                }
            } else if (options.category === 'customer-engagement') {
                // CUSTOMER ENGAGEMENT - 10 unique variations
                if (formal) {
                    templates.push(
                        `We value your input: Which ${productName} variety is your preference? Share your thoughts with Chocolate on James.`,
                        `Customer appreciation: Your support makes our ${productName} possible. Thank you for choosing artisan quality.`,
                        `Join the conversation: How do you enjoy ${productName}? We'd love to hear from our Hamilton community.`,
                        `Your favorites: ${productName} are bestsellers thanks to customers like you. What should we create next?`,
                        `Community question: Which ${productName} would you recommend to a friend? Share your experience.`,
                        `We're listening: Your feedback shapes our ${productName}. Comment below with your preferences.`,
                        `Chocolate lovers unite: Tag someone who needs to try ${productName}. Spread the word about quality.`,
                        `Customer spotlight: Share how you enjoy ${productName}. Your stories inspire our craft.`,
                        `Interactive poll: ${productName} - which flavor combination should we explore next? You decide.`,
                        `Thank you for making ${productName} a Hamilton favorite. Your loyalty means everything.`
                    );
                } else {
                    templates.push(
                        `${e ? 'üó≥Ô∏è ' : ''}VOTE TIME! Which ${productName} flavor should we make MORE of?${question ? ` ${e ? 'üç´ ' : ''}Drop your pick below!` : ''} ${e ? 'üëá' : ''}`,
                        `${e ? 'üì∏ ' : ''}PHOTO CONTEST: Share your ${productName} pics! ${e ? 'üç´‚ú® ' : ''}Best photo wins a free box!${question ? ` ${e ? 'üèÜ ' : ''}Ready to win?` : ''} Tag us!`,
                        `${e ? 'üí¨ ' : ''}Tell us your story: How did you discover ${productName}?${question ? ` ${e ? 'üç´ ' : ''}First time or longtime fan?` : ''} ${e ? '‚ù§Ô∏è' : ''} We love hearing from you!`,
                        `${e ? 'üéØ ' : ''}CHALLENGE: Can you guess the secret ingredient in our ${productName}?${question ? ` ${e ? 'üç´ ' : ''}Wrong answers only!` : ''} ${e ? 'üòÑ' : ''} Make us laugh!`,
                        `${e ? 'üë• ' : ''}Tag your chocolate buddy! ${e ? 'üç´ ' : ''}They NEED to try ${productName}!${question ? ` ${e ? 'ü§ó ' : ''}Who's your partner in chocolate crime?` : ''}`,
                        `${e ? 'üåü ' : ''}SHOUT OUT to everyone who loves ${productName}! ${e ? 'üç´ ' : ''}Drop a ${e ? '‚ù§Ô∏è' : 'heart'} if that's you!${question ? ` ${e ? 'üôã ' : ''}Who's in the club?` : ''}`,
                        `${e ? 'üéÅ ' : ''}GIVEAWAY ALERT: Win ${productName}!${question ? ` ${e ? 'üç´ ' : ''}Want in?` : ''} Like + Comment + Tag 2 friends! Easy! ${e ? '‚ú®' : ''}`,
                        `${e ? 'ü§î ' : ''}Question for YOU: ${productName} - morning treat or midnight snack?${question ? ` ${e ? 'üç´ ' : ''}When do YOU indulge?` : ''} ${e ? 'üåô‚òÄÔ∏è' : ''}`,
                        `${e ? 'üí≠ ' : ''}Fill in the blank: ${productName} taste like _____!${question ? ` ${e ? 'üç´ ' : ''}Get creative!` : ''} ${e ? '‚ú®' : ''} Funniest answer gets featured!`,
                        `${e ? 'üôè ' : ''}THANK YOU for making ${productName} our bestseller! ${e ? 'üç´‚ù§Ô∏è ' : ''}YOU make this possible!${question ? ` ${e ? 'ü§ó ' : ''}Favorite thing about us?` : ''}`
                    );
                }
            } else {
                // DEFAULT/FALLBACK - 10 unique variations
                if (formal) {
                    templates.push(
                        `Discover the exceptional quality of ${productName} at Chocolate on James. Handcrafted with premium ingredients and traditional techniques on James Street North.`,
                        `Experience ${productName} from Hamilton's premier chocolatier. Each piece represents our commitment to artisan excellence and quality.`,
                        `Introducing ${productName}: where time-honored craftsmanship meets premium ingredients. Available at Chocolate on James.`,
                        `${productName} showcase our dedication to the chocolate-making craft. Handmade in Hamilton with meticulous attention to detail.`,
                        `Indulge in ${productName}, created with passion and precision. Visit us on James Street North to experience the difference.`,
                        `Our ${productName} represent years of perfecting artisan techniques. Quality you can taste in every bite.`,
                        `Handcrafted ${productName} from Chocolate on James. Premium ingredients, expert craftsmanship, exceptional results.`,
                        `Experience why Hamilton chooses ${productName}. Traditional methods, modern excellence, timeless quality.`,
                        `${productName}: a testament to artisan dedication and ingredient perfection. Discover Chocolate on James today.`,
                        `Elevate your chocolate experience with ${productName}. Handmade excellence from Hamilton's James Street North.`
                    );
                } else {
                    templates.push(
                        `${e ? '‚ú® ' : ''}Meet ${productName}! ${e ? 'üç´ ' : ''}Handcrafted with love on Hamilton's James Street North!${question ? ` ${e ? 'üòç ' : ''}Ready to fall in love?` : ''}`,
                        `${e ? 'üåü ' : ''}Introducing: ${productName}! ${e ? 'üç´ ' : ''}Made fresh daily by actual humans (us!) in Hamilton!${question ? ` ${e ? 'üëã ' : ''}Come meet your chocolatiers?` : ''}`,
                        `${e ? 'üí´ ' : ''}Check out ${productName}! ${e ? 'üç´ ' : ''}Premium ingredients, zero shortcuts, 100% delicious!${question ? ` ${e ? 'üéØ ' : ''}Chocolate done right?` : ''}`,
                        `${e ? 'üé® ' : ''}Feast your eyes on ${productName}! ${e ? 'üç´‚ú® ' : ''}Every piece a little work of art from Chocolate on James!${question ? ` ${e ? 'üòã ' : ''}Too pretty to eat? Never!` : ''}`,
                        `${e ? 'üç´ ' : ''}Chocolate lovers, unite! ${productName} are calling your name! Made in Hamilton with serious passion!${question ? ` ${e ? '‚ù§Ô∏è ' : ''}Answer the call?` : ''}`,
                        `${e ? '‚ú® ' : ''}Fresh batch alert: ${productName} ready NOW! ${e ? 'üç´ ' : ''}Handmade on James Street North, enjoyed everywhere!${question ? ` ${e ? '‚ö° ' : ''}Who's stopping by?` : ''}`,
                        `${e ? 'üíù ' : ''}Treat yourself to ${productName}! ${e ? 'üç´ ' : ''}Because you deserve handcrafted happiness! Hamilton-made goodness!${question ? ` ${e ? 'ü§ó ' : ''}Self-care Sunday?` : ''}`,
                        `${e ? 'üåü ' : ''}What makes ${productName} special? ${e ? 'üç´ ' : ''}Love, skill, and Hamilton pride in every bite!${question ? ` ${e ? 'üíõ ' : ''}Taste the difference?` : ''}`,
                        `${e ? 'üéâ ' : ''}Celebrating ${productName} today! ${e ? 'üç´ ' : ''}Small batch, big flavor, endless smiles! That's our recipe!${question ? ` ${e ? 'üòä ' : ''}Join the party?` : ''}`,
                        `${e ? 'üí´ ' : ''}${productName} from your friends at Chocolate on James! ${e ? 'üç´ ' : ''}Supporting local never tasted this good!${question ? ` ${e ? 'üè™ ' : ''}Team local?` : ''}`
                    );
                }
            }
            } // Close the templates.length === 0 check

            // If regenerating, shuffle the templates to get different order
            if (isRegenerate) {
                templates = shuffleArray(templates);
            }

            return templates;
        }

        function displayContent(imagePrompt, socialPosts, options) {
            const output = document.getElementById('output');
            const platformName = {
                'instagram-square': 'Instagram Post',
                'instagram-story': 'Instagram Story',
                'facebook-ad': 'Facebook Ad',
                'pinterest': 'Pinterest Pin'
            }[options.platform];

            let logoInstructions = '';
            if (options.includeLogo) {
                logoInstructions = `
                    <div class="logo-instructions">
                        <strong>üìç Logo Placement Instructions:</strong><br>
                        After generating the image:<br>
                        1. Download your AI-generated image<br>
                        2. Open in Canva (canva.com - free)<br>
                        3. Upload your "Chocolate on James" logo<br>
                        4. Place logo in bottom right corner (the AI left space there)<br>
                        5. Keep logo subtle - about 10-15% of image height<br>
                        6. Export final image with logo overlay!
                    </div>
                `;
            }

            let html = `
                <div class="success-message">
                    ‚úÖ Content Generated! Copy your prompt, generate the image, then pick your favorite caption below!
                </div>

                <!-- Image Prompt Section -->
                <div class="content-section">
                    <div class="content-header">
                        <div>
                            <span class="content-icon">üé®</span>
                            <span class="content-title">AI Image Prompt</span>
                            <span class="platform-badge">${imagePrompt.platform}</span>
                        </div>
                        <div class="action-buttons">
                            <button class="btn-copy" onclick="copyText(this, 'prompt')">üìã Copy Prompt</button>
                            <button class="btn-export" onclick="exportPrompt()">üíæ Export</button>
                        </div>
                    </div>
                    <div class="prompt-text" data-copy-type="prompt">${imagePrompt.prompt}</div>
                    ${logoInstructions}
                </div>

                <!-- Social Media Copy Section -->
                <div class="content-section">
                    <div class="content-header">
                        <div>
                            <span class="content-icon">‚úçÔ∏è</span>
                            <span class="content-title">10 ${platformName} Captions</span>
                        </div>
                        <div class="action-buttons">
                            <button class="btn-copy" onclick="copyAllCaptions()">üìã Copy All 10</button>
                            <button class="btn-export" onclick="exportCaptions()">üíæ Export to File</button>
                        </div>
                    </div>
                    <div class="social-posts-grid">
                        ${socialPosts.map(post => `
                            <div class="social-post-card">
                                <div class="post-number">#${post.number}</div>
                                <div class="post-copy" data-copy-text="${escapeHtml(post.copy)}">${escapeHtml(post.copy).replace(/\n/g, '<br>')}</div>
                                <div class="post-meta">
                                    <span class="char-count">${post.charCount} characters</span>
                                    <button class="btn-copy" onclick="copySocialPost(this)">üìã Copy</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Quick Guide -->
                <div class="content-section">
                    <div class="content-header">
                        <div>
                            <span class="content-icon">üöÄ</span>
                            <span class="content-title">Quick Start Guide</span>
                        </div>
                    </div>
                    <div style="color: #d4a574; line-height: 1.8;">
                        <p style="margin-bottom: 15px;"><strong style="color: #FFD700;">1. Generate Image:</strong> Copy the AI prompt above ‚Üí Paste into ${imagePrompt.platform} ‚Üí Generate 3-5 variations ‚Üí Pick your favorite!</p>
                        <p style="margin-bottom: 15px;"><strong style="color: #FFD700;">2. ${options.includeLogo ? 'Add Logo:' : 'Finalize Image:'}</strong> ${options.includeLogo ? 'Download image ‚Üí Open in Canva ‚Üí Add your logo to bottom right ‚Üí Export!' : 'Download your favorite variation and you\'re ready to post!'}</p>
                        <p style="margin-bottom: 15px;"><strong style="color: #FFD700;">3. Choose Caption:</strong> Browse the 10 captions ‚Üí Copy your favorite ‚Üí You're ready to post!</p>
                        <p><strong style="color: #FFD700;">4. Post & Engage:</strong> Share on ${platformName} ‚Üí Respond to comments ‚Üí Watch engagement grow! üéâ</p>
                    </div>
                </div>
            `;

            output.innerHTML = html;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function copyText(button, type) {
            const section = button.closest('.content-section');
            const textElement = section.querySelector('[data-copy-type="' + type + '"]');
            const text = textElement.textContent;

            navigator.clipboard.writeText(text).then(() => {
                showCopySuccess(button);
            });
        }

        function copySocialPost(button) {
            const card = button.closest('.social-post-card');
            const copyElement = card.querySelector('[data-copy-text]');
            const text = copyElement.getAttribute('data-copy-text');

            navigator.clipboard.writeText(text).then(() => {
                showCopySuccess(button);
            });
        }

        function copyAllCaptions() {
            const captions = document.querySelectorAll('[data-copy-text]');
            let allText = '';
            captions.forEach((caption, index) => {
                allText += `--- Caption ${index + 1} ---\n${caption.getAttribute('data-copy-text')}\n\n`;
            });

            navigator.clipboard.writeText(allText).then(() => {
                alert('‚úÖ All 10 captions copied! Paste into your content planner.');
            });
        }

        function showCopySuccess(button) {
            const originalText = button.textContent;
            button.textContent = '‚úì Copied!';
            button.style.background = 'rgba(34, 139, 34, 0.5)';
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '';
            }, 2000);
        }

        function exportPrompt() {
            const promptText = document.querySelector('[data-copy-type="prompt"]').textContent;
            const blob = new Blob([promptText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chocolate-on-james-ai-prompt.txt';
            a.click();
        }

        function exportCaptions() {
            const captions = document.querySelectorAll('[data-copy-text]');
            let content = '=== CHOCOLATE ON JAMES - SOCIAL MEDIA CAPTIONS ===\n\n';
            captions.forEach((caption, index) => {
                content += `--- CAPTION ${index + 1} ---\n${caption.getAttribute('data-copy-text')}\n\n`;
            });

            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chocolate-on-james-captions.txt';
            a.click();
        }
    </script>
</body>
</html>
